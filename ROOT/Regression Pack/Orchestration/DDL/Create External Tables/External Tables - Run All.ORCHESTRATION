{"job":{"components":{"1729":{"id":1729,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":272,"y":0,"width":32,"height":32,"inputConnectorIDs":[1746],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[1792],"outputUnconditionalConnectorIDs":[1745],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Reg"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Reg"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1730":{"id":1730,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":112,"y":-128,"width":32,"height":32,"inputConnectorIDs":[1747],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 1"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1731":{"id":1731,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":272,"y":-128,"width":32,"height":32,"inputConnectorIDs":[1792],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 2"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1732":{"id":1732,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":599,"y":1,"width":32,"height":32,"inputConnectorIDs":[1744],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[1748],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - All File Types 0"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - All File Types"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1733":{"id":1733,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":112,"y":0,"width":32,"height":32,"inputConnectorIDs":[1743],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[1747],"outputUnconditionalConnectorIDs":[1746],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Compression"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Compression"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1734":{"id":1734,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":-48,"y":-128,"width":32,"height":32,"inputConnectorIDs":[1749],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1735":{"id":1735,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":592,"y":-128,"width":32,"height":32,"inputConnectorIDs":[1748],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 4"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1736":{"id":1736,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":-48,"y":0,"width":32,"height":32,"inputConnectorIDs":[1742],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[1749],"outputUnconditionalConnectorIDs":[1743],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Encoding"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Encoding"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1737":{"id":1737,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":432,"y":0,"width":32,"height":32,"inputConnectorIDs":[1745],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[1750],"outputUnconditionalConnectorIDs":[1744],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Partition"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"External Tables - Partition"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1738":{"id":1738,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":432,"y":-128,"width":32,"height":32,"inputConnectorIDs":[1750],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 3"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1739":{"id":1739,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-208,"y":0,"width":32,"height":32,"inputConnectorIDs":[1741],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1742],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create Stage"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"create stage if not exists \"external_tables\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}');\n\ncreate stage if not exists \"TEST_DB\".\"PUBLIC\".external_tables url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}');\n\ncreate stage if not exists \"te%^*-?!t\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}');\n\ncreate stage if not exists \"new_rs_stage\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}');\n\ncreate stage if not exists \"basicEncryptedStage\" url = 'azure://mtlnsbtest.blob.core.windows.net/mtln-regression-suite/SF External Tables/' credentials=(azure_sas_token='${azure_sas_token}') encryption =(type='AZURE_CSE' master_key = 'AAAAAAAABBBBBBBBCCCCCCCCDDDDDDDD');\n\ncreate stage if not exists \"S3Encryption\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}') encryption=(type='AWS_SSE_S3');\n\ncreate stage if not exists \"New_Test_Schema\" url = 'azure://mtlnsbtest.blob.core.windows.net/mtln-regression-suite/SF External Tables/' credentials=(azure_sas_token='${azure_sas_token}');\n\ncreate stage if not exists \"NegativeStage\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='wrong', aws_secret_key='nope');\n\ncreate stage if not exists \"KMSEncryption\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}') encryption=(type='AWS_SSE_KMS' kms_key_id = 'alias/TestKMSRealm:8c636aad-e0ef-4de4-bc01-b3d085660a86');\n\ncreate stage if not exists \"AWSEncryption\" url = 's3://gm-sf-externaltables/' credentials=(aws_key_id='${aws_id}', aws_secret_key='${aws_secret}') encryption=(master_key = 'AAAAAAAABBBBBBBBCCCCCCCCDDDDDDDD');"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1740":{"id":1740,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-368,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1741],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{},"failureConnectors":{"1747":{"id":1747,"sourceID":1733,"targetID":1730},"1748":{"id":1748,"sourceID":1732,"targetID":1735},"1749":{"id":1749,"sourceID":1736,"targetID":1734},"1750":{"id":1750,"sourceID":1737,"targetID":1738},"1792":{"id":1792,"sourceID":1729,"targetID":1731}},"unconditionalConnectors":{"1741":{"id":1741,"sourceID":1740,"targetID":1739},"1742":{"id":1742,"sourceID":1739,"targetID":1736},"1743":{"id":1743,"sourceID":1736,"targetID":1733},"1744":{"id":1744,"sourceID":1737,"targetID":1732},"1745":{"id":1745,"sourceID":1729,"targetID":1737},"1746":{"id":1746,"sourceID":1733,"targetID":1729}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{"1728":{"id":1728,"x":626,"y":-47,"width":250,"height":58,"text":"Claire 01/07/2021\n\nExternal Tables - All File Types fails with:\nFailure using stage area. Cause: [The AWS Access Key Id you provided is not valid.]\n\nNeed to find the correct AWS Access Key and Secret, and replace the values in the Job variables.  Have tried several so far, but they don't work","colour":"d60000"}},"variables":{"aws_id":{"definition":{"name":"aws_id","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PRIVATE"},"value":"AKIAJPVYB5ZTS7LNACZA"},"aws_secret":{"definition":{"name":"aws_secret","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PRIVATE"},"value":"u5cO821TXoLrpQzOaZ9Iv9bRuhOG+GOPwSDstpBO"},"azure_sas_token":{"definition":{"name":"azure_sas_token","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"?sv=2018-03-28&ss=b&srt=sco&sp=rwdlac&se=2089-07-04T15:53:57Z&st=2019-07-04T07:53:57Z&spr=https,http&sig=exgaE5DCftHExAP1wfwGbMsLxoBbV4ZdXOkE10HtJag%3D"}},"grids":{}},"info":{"name":"External Tables - Run All","description":null,"type":"ORCHESTRATION","tag":"4384b0c6-8e0c-4f11-a922-abedcb125f81"}}